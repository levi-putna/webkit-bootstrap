'use strict';(function(f){function d(){this._events={};this._maxListeners=10}function c(b,c,e,d,f){this.type=b;this.listener=c;this.scope=e;this.once=d;this.instance=f}c.prototype.fire=function(b){this.listener.apply(this.scope||this.instance,b);if(this.once)return this.instance.removeListener(this.type,this.listener,this.scope),!1};d.prototype.eachListener=function(b,c){var e=null,d=null,f=null;if(this._events.hasOwnProperty(b)){d=this._events[b];for(e=0;e<d.length;e+=1)if(f=c.call(this,d[e],e),
!1===f)e-=1;else if(!0===f)break}return this};d.prototype.addListener=function(b,d,e,i){this._events.hasOwnProperty(b)||(this._events[b]=[]);this._events[b].push(new c(b,d,e,i,this));this.emit("newListener",b,d,e,i);this._maxListeners&&!this._events[b].warned&&this._events[b].length>this._maxListeners&&("undefined"!==typeof console&&console.warn("Possible EventEmitter memory leak detected. "+this._events[b].length+" listeners added. Use emitter.setMaxListeners() to increase limit."),this._events[b].warned=
!0);return this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(b,c,e){return this.addListener(b,c,e,!0)};d.prototype.removeListener=function(b,c,e){this.eachListener(b,function(d,f){d.listener===c&&(!e||d.scope===e)&&this._events[b].splice(f,1)});this._events[b]&&0===this._events[b].length&&delete this._events[b];return this};d.prototype.off=d.prototype.removeListener;d.prototype.removeAllListeners=function(b){b&&this._events.hasOwnProperty(b)?delete this._events[b]:b||(this._events=
{});return this};d.prototype.listeners=function(b){if(this._events.hasOwnProperty(b)){var c=[];this.eachListener(b,function(b){c.push(b.listener)});return c}return[]};d.prototype.emit=function(b){for(var c=[],e=null,e=1;e<arguments.length;e+=1)c.push(arguments[e]);this.eachListener(b,function(b){return b.fire(c)});return this};d.prototype.setMaxListeners=function(b){this._maxListeners=b;return this};"function"===typeof define&&define.amd?define(function(){return d}):f.EventEmitter=d})(this);
StackExchange.realtime=function(){function f(){if(!(null==o||1!=o.readyState))for(var a=0,b=t.length;a<b;a++)d("sending: "+t[a]),o.send(t[a])}function d(a){StackExchange.options.user.isDeveloper&&console.log(a)}function c(){v.on("hb",function(a){o.send(a)})}function b(a){t.push(a);f()}function g(a,b){1!=$("#vote-accepted-"+a.answerid).length&&($(".vote-accepted-on").remove(),b||$('.vote input[value="'+a.answerid+'"]').parent().append('<span class="vote-accepted-on" title="The question owner accepted this as the best answer">accepted</span>'))}
function e(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(a){a&&a.count&&i(a.count)}})}function i(a){var b=$(".suggested-edits-count");b.text()!=a&&(0==$(":animated").length&&b.fadeTo("fast",0.5).fadeTo("fast",1),b.text(a))}function l(){$("#new-answer-activity").remove();$("#answers-header").prepend(y)}function m(a){var b=$(".question[data-questionid="+a.id+"], .answer[data-answerid="+a.id+"]"),c=$('<div class="new-post-activity" data-postid="'+
a.id+'">an edit has been made to this post; click to load</div>');0<b.find(".new-post-activity[data-postid="+a.id+"]").length||b.prepend(c.click(function(){$(".new-post-activity[data-postid="+a.id+"]").remove();$.get("/posts/"+a.id+"/ajax-load-mini?title=true",x(b.find(".postcell, .answercell"),a))}))}function n(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function h(){var b=[],c;for(c in p)p.hasOwnProperty(c)&&b.push(p[c]);b=b.sort(n);for(c=0;c<b.length;c++){var e=b[c];$("#question-summary-"+
e.id).remove();$(e.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}a(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,w);"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);k();$(".new-post-activity").remove();p={}}function a(a){var b=document.title.replace(/^\(\d*\*?\) /,"");0<a&&(b="("+a+") "+b);window.setTimeout(function(){$(document).attr("title",b)},200)}function k(){for(var a=$("span.relativetime"),b=0;b<a.length;b++)if(a[b].title){var c;
c=new Date(a[b].title);c=((new Date).getTime()-c.getTime())/1E3;var e=Math.floor(c/86400);if(c=isNaN(e)||0>e||31<=e?void 0:0==e&&(2>c&&"just now"||60>c&&Math.floor(c)+(u?"s ago":" secs ago")||120>c&&(u?"1m ago":"1 min ago")||3600>c&&Math.floor(c/60)+(u?"m ago":" mins ago")||7200>c&&(u?"1h ago":"1 hour ago")||86400>c&&Math.floor(c/3600)+(u?"h ago":" hours ago")))a[b].innerHTML=c}}var j,o,p={},r=[],q=0,t=[],s=!1,u=!1,w,v=new EventEmitter,y=function(){var a=Object.keys(r).length;return $('<div id="new-answer-activity">'+
a+" new answer"+(1<a?"s":"")+" to this question</div>").click(function(){StackExchange.realtime.expandAnswers()})},x=function(a,b){return function(c){var e=$(c).find(".postcell, .answercell"),d=a.closest(".question").length;a.replaceWith(e.hide());c=$(c).attr("data-title");null!=c&&$("h1 a.question-hyperlink").text(c);e.fadeIn(400,function(){StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts();styleCode()});StackExchange.comments.init({post:e});StackExchange.vote.init(b.id);
StackExchange.vote||StackExchange.question.bindAnonymousVoteDisclaimers();a.find("a[id^='link-post-']").click(function(a){if(!a.ctrlKey&&!a.metaKey)return StackExchange.question.showShareTip($(this),options.showCitation),!1});StackExchange.question.bindSuggestedEditPopupLinks();d&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init();window.history.pushState(b,"new post","#"+b.id)}},z=function(){var b=Object.keys(p).length;a(b);return $('<div class="new-post-activity">'+b+" question"+
(1<b?"s":"")+" with new activity</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(a){j=a;if("WebSocket"in window||"MozWebSocket"in window){if(o)try{d("closing WebSocket"),o.close()}catch(b){}o||(d("opening WebSocket"),o="WebSocket"in window?new WebSocket(j):new MozWebSocket(j),o.onopen=function(){s||(s=!0);q=0;d("WebSocket opened");f();c();setInterval(k,6E4)},o.onmessage=function(a){a=$.parseJSON(a.data);v.emit(a.action,a.data)},o.onclose=function(){o=
null;d("WebSocket closed");5>q&&(q++,d("reconnect attempt:"+q),setTimeout('StackExchange.realtime.init("'+j+'")',1E3*((new Date).getTime()%50/20)))},o.onerror=function(){d("WebSocket failed");o=null})}},expandActiveQuestions:h,expandAnswers:function(){var a=$("#answers #answers-header .answers-subheader h2"),b=parseInt(a.text().match(/^\d*\*?/))+r.length;isNaN(b)&&(b=r.length);a.text(b+" Answer"+(1<b?"s":""));$("#new-answer-activity").remove();var c=$("#answers #answers-header");$.each(r,function(a,
b){$.get("/posts/"+b+"/ajax-load-mini",function(a){a=$(a);a.insertAfter(c).hide().fadeIn(400,function(){StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts();styleCode()});StackExchange.comments.init({post:a});StackExchange.vote.init(b)})});StackExchange.vote||StackExchange.question.bindAnonymousVoteDisclaimers();c.find("a[id^='link-post-']").click(function(a){if(!a.ctrlKey&&!a.metaKey)return StackExchange.question.showShareTip($(this),options.showCitation),!1});StackExchange.question.bindSuggestedEditPopupLinks();
k();r=[]},subscribeToActiveQuestions:function(a,c,e,d,j,m,g){a=a+"-"+c;w=e;u=m;b(a);v.on(a,function(a){a=$.parseJSON(a);if(null!=j)for(var b=0;b<j.length;b++)if(-1==$.inArray(j[b],a.tags))return;null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(a.body)||(p[a.id]={id:a.id,body:a.body,index:(new Date).getTime(),siteid:a.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(z),d&&h());null!=g&&g(a)})},subscribeToInboxNotifications:function(){if(null!=
StackExchange.options.user.accountId){var a=StackExchange.options.user.accountId+"-inbox";b(a);v.on(a,function(a){$(".unreadCount").remove();var b=$('<a class="unreadCount" title="unread messages in your inbox">'+a+"</a>").insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:b.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(a)})}},subscribeToQuestion:function(a,c){var e=a+"-question-"+c;b(e);v.on(e,function(a){a=$.parseJSON(a);if(a.acctid!=StackExchange.options.user.accountId)switch(a.a){case "score":var b=
$('.vote input[value="'+a.id+'"]').siblings(".vote-count-post");b.text()!=a.score&&(b.text(a.score),0==$(":animated").length&&b.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":0==$("#comment-"+a.commentid).length&&(a=$("#comments-link-"+a.id),b=a.data("comments-count")||0,b++,a.data("comments-count",b),a.attr("title","expand to show all comments on this post, or add one of your own"),a.html("add / show <b>"+
b+"</b> more comment"+(1<b?"s":"")).show().fadeTo("fast",0.7).fadeTo("fast",1));break;case "answer-add":0==$("#answer-"+a.answerid).length&&(r.push(a.answerid),StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(l,5E3).trigger():l(),StackExchange.cardiologist.notifiedOfNewAnswer());break;case "accept":g(a);break;case "unaccept":g(a,!0);break;case "post-edit":m(a)}})},subscribeToReputationNotifications:function(a){null!=StackExchange.options.user.accountId&&(a=a+"-"+StackExchange.options.user.userId+
"-reputation",b(a),v.on(a,function(a){var b=$("#hlinks .reputation-score");b.text()!=a.score&&(0==$(":animated").length&&b.fadeTo("fast",0.8).fadeTo("fast",1),b.text(a))}))},subscribeToSuggestedEdits:function(a,c){var d;c?(d=a+"-suggested-edits-count-update",b(d),v.on(d,function(){e()})):(d=a+"-suggested-edits-count",b(d),v.on(d,function(a){i(a)}))},updateRelativeDates:k}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(f){if(gauth.enabled()){var d=document.domain;"meta."==d.substr(0,5)&&(d=d.substr(4,d.length-4));var c=$.cookie("gauth");if(null==c)$.cookie("gauth",null,{path:"/",domain:d}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=d.charAt(0)&&(d="."+d);$.cookie("gauth",null,{path:"/",domain:d});$.cookie("gauth",null,{path:"/",domain:document.domain});var b=c.indexOf(":"),d=c.substr(0,b),c=c.substr(b+1),g=f+"/auth/global/write?authToken="+
encodeURIComponent(d)+"&nonce="+encodeURIComponent(c);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+g+"'></iframe>")})}}},checkStackAuth:function(f){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var d=function(c){if(c.origin==f)if("No Local Storage"==c.data)gauth.noGAuthStorage();else if("No Session"==c.data)gauth.noGAuthSession();else{var b=c.data.substr(0,c.data.indexOf(",")),c=c.data.substr(c.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:b,nonce:c},function(b){gauth.globallyAuthed(b)},"json")}};window.attachEvent?window.attachEvent("onmessage",d):window.addEventListener("message",d,!1);$.post("/users/login/global/request","",function(c){var b=f+"/auth/global/read?request="+encodeURIComponent(c.token)+"&nonce="+encodeURIComponent(c.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+b+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(f){if(f&&f.Message){var f=f.Message+" ",d,c=!1,b=""+window.location,g=b.indexOf("returnurl=");if(-1!=g){var e=b.indexOf("&",g);-1==e&&(e=b.length);d=decodeURIComponent(b.substring(g+10,e));d=/^(?:http:\/\/|\/)/.test(d)?d.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=b.indexOf("/users/login")&&
(c=!0,d=d||"/");StackExchange.helpers.showFancyOverlay({message:c?f+"<br>You are being redirected...":f+(d?"<a href=\"javascript:window.location='"+d+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!c,complete:function(){c&&(window.location=d)}})}}}}(),genuwine=function(){var f,d="",c,b,g=[],e=function(){return $(".genu").hasClass("genu-on")},i=function(){var a=$(".genu"),e=$("#seWrapper");if(0==e.length||
0<c||b){m();var e=$("#seWrapper"),d;0<c?(d=$("#seTabInbox"),r(d)):b?(d=$("#seTabNotices"),n(d)):(d=$("#seTabHot"),k(d));d.addClass("seCurrent")}if(d=a.hasClass("genu-on")){$(".unreadCountTab").remove();$(".itemBoxNew").removeClass("itemBoxNew");e.fadeOut("fast");for(e=0;e<g.length;e++)g[e]();g=[];0<b&&$("#portalLink .unreadCount").text(""+b).addClass("newNotices").show().click(i)}else e.fadeIn("fast"),$(".unreadCount").hide();a.toggleClass("genu-on",!d);-1==c&&$(a).ready(function(){$("#seTabInbox").hide()});
l($("#seTabInbox"),$("#seTabNotices"))},l=function(a,e){StackExchange.options.site.isNoticesTabEnabled&&b&&0==e.find(".unreadCountTab").length&&e.prepend('<span class="unreadCountTab newNotices">'+b+"</span>");0<c&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab">'+c+"</span>")},m=function(){$("#seWrapper").remove();var b='<div id="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+d+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li><li><a id="seTabInbox">Inbox</a></li>'+
(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter">'+(!StackExchange.options.user.isAnonymous?'<div id="seTabEmail" class="seEmailAccount"><a>email settings</a></div>':"")+'<a id="seClose">close</a></div></div>',c=$("#hlinks"),c=c.height()+c.offset().top+5;$(b).appendTo("#portalLink").css({top:c}).find("ul.seNavLinks a, #seTabEmail").click(function(){var b=
$(this);$(".seNavLinks a").removeClass("seCurrent");b.addClass("seCurrent");switch(b.attr("id")){case "seTabHot":k(b);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&a(b);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":r(b);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();
$("#seContainerInbox").fadeIn("fast");break;case "seTabEmail":0==$("#seContainerEmail").length&&j(b);$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerNotices").hide();$("#seContainerEmail").fadeIn("fast");break;case "seTabNotices":n(b),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){i()})},n=function(a){0==$("#seContainerNotices").length&&u(a,"/notices/genuwine?userId="+
StackExchange.options.user.id,"jsonp",h,!0)},h=function(a,c){for(var e='<div id="seContainerNotices" style="display:none">',d=0;d<c.length;d++)var j=c[d],e=e+('<div class="noticeBox'+(j.is_unread?" itemBoxNew":"")+'"><a href="'+j.site_url+'" class="siteLinkFavicon"><img src="'+j.icon+'"></a><div class="siteInfo"><p>'+j.text+"</p></div></div>");w(a,e+"</div>");g.push(function(){b=0;l($("#seTabInbox"),$("#seTabNotices"))});b=0},a=function(a){u(a,d+"/genuwine/sites?callback=?&host="+document.location.host+
(f?"&accountId="+f:""),"jsonp",p)},k=function(a){0==$("#seContainerHot").length&&u(a,d+"/genuwine?callback=?","jsonp",o)},j=function(a){u(a,"/accounts/email-settings","json",function(a,b){function c(){$("#email-save").removeAttr("disabled");$("#email-confirmation").html("")}w(a,'<div id="seContainerEmail" style="display:none; font-size:11px;"><div class="itemBox" style="border-bottom: 0px"><p>Would you like to receive unread inbox messages via email?</p><div>Email: <input id="email-notify" name="email-notify" style="width:300px;" value="'+
b.verifiedEmail+'"></input></div><div><input type="radio" name="optIn" value="true" id="email-enable"'+(!0==b.optIn?'checked="checked"':"")+'"> <label for="email-enable">Email me my unread inbox messages </label> <select id="email-freq"><option value="3">every 3 hours</option><option value="24">daily</option><option value="168">weekly</option></select> </div><div><input type="radio" name="optIn" value="false" id="email-disable"'+(!0!=b.optIn?'checked="checked"':"")+'"> <label for="email-disable">Do not email me inbox messages</label></input></div><div><input type="button" name="save" id="email-save" value="Save" disabled="disabled"></input></div><div id="email-confirmation" style="display:none;"></div></div></div>');
$("#email-freq").val(b.freq).on("click focus",function(){$("#email-enable").prop("checked",!0)});$("#email-notify").focus().keyup(c);$("#email-enable, #email-disable, #email-freq").change(c);$("#email-save").click(function(){v();$.post("/accounts/verified-email-set",{email:$("#email-notify").val(),fkey:StackExchange.options.user.fkey,optin:$("input[name=optIn]:checked").val(),freq:$("#email-freq").val()},function(a){$(".seContainer").removeSpinner();$("#email-confirmation").html(a.message).fadeIn();
a.success&&$("#email-save").attr("disabled","disabled")},"json")})},!0)},o=function(a,b){for(var c=$("<div/>"),e='<div id="seContainerHot" style="display:none">',d=0;d<b.length;d++)var j=b[d],p=j.SiteId,h='href="http://'+p+"/q/"+j.Id+'?hq=1"',m=parseInt(j.DisplayScore,10),e=e+('<div class="itemBox"><a '+h+' class="seNumAnswer">'+m+'</a><div class="siteInfo"><p><a '+h+">"+c.text(j.Title).html()+'</a></p><a href="http://'+p+'" class="siteLink">'+p+"</a></div></div>");w(a,e+"</div>")},a=function(a){u(a,
d+"/genuwine/sites?callback=?&host="+document.location.host+(f?"&accountId="+f:""),"jsonp",p)},p=function(a,b){for(var c='<div id="seContainerSites" style="display:none">',e=0;e<b.length;e++)var d=b[e],j=d.Name,p='href="http://'+d.Id+'?as=1"',c=c+('<div class="itemBox"><a '+p+' class="siteFavicon"><img src="'+d.FaviconUrl+'" alt="'+j+'"></a><div class="siteInfo"><p><a '+p+">"+j+"</a></p><a "+p+' class="siteLink">'+d.Description+"</a></div></div>");w(a,c+"</div>")},r=function(a){-1!=c&&(0==$("#seContainerInbox").length||
0<c)&&q(a)},q=function(a){u(a,"/inbox/genuwine","json",t,!0)},t=function(a,b){for(var e='<div id="seContainerInbox" style="display:none">',d=0;d<b.length;d++){var j=b[d],p='href="'+j.Url+'"',h='title="'+j.CreationDate+'"',m=j.Count,e=e+('<div class="itemBox'+(j.IsNew?" itemBoxNew":"")+'"><a '+p+' class="siteLinkFavicon"><img src="'+j.FaviconUrl+'" alt="'+j.SiteUrl+'"></a><div class="siteInfo">');"careers message"==j.Type?e+="<p><a "+p+' style="font-weight:normal"><b>'+j.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":
"invitation"==j.Type?(h=j.Count,e+="<p><a "+p+' style="font-weight:normal"><b>'+h+"</b> "+("invitation"+(1<h?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):e+="<p>"+(1<m?m+" ":"")+j.Type+" on <a "+p+" "+h+">"+j.Title+"</a></p>";e+='<p class="inboxSummary">'+(j.Summary||"")+"</p></div></div>"}f&&5<=b.length&&(e+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+f+'?tab=inbox">more inbox messages &hellip;</a></div></div>');w(a,e+"</div>");
g.push(function(){c=0;l($("#seTabInbox"),$("#seTabNotices"))});c=0},s={},u=function(a,b,c,e,d){var j=a.attr("id");if(s[j])v();else{s[j]=!0;v();var p=function(){s[j]=!1;StackExchange.helpers.showErrorPopup($(".seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:b,dataType:c,success:function(b){s[j]=!1;b&&(0<b.length||d)?e(a,b):p()},error:p,complete:function(){$(".seContainer").removeSpinner()}})}},w=function(a,b){var c=$(b);c.prependTo(".seContainer");a.hasClass("seCurrent")&&
c.fadeIn("fast")},v=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner(".seContainer",{position:"relative",left:"10px",top:"10px"})},y=function(){var a=$("#portalLink .unreadCount"),b=a.css("margin-top");a.css({marginTop:-20,opacity:0}).show().animate({marginTop:b,opacity:1},2E3)},x=function(){var a=$(".unreadCount"),b=a.data("events");(!b||!b.click)&&0<a.length&&a.click(i)};return{isVisible:e,click:i,setUnreadCount:function(a){c=a;var b=$("#seTabInbox");0<a?($("#portalLink .unreadCount").text(c),
b.hasClass("seCurrent")&&e()&&q(b),y()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");x()},animateInbox:y,init:function(a,j,p){var h=$(".genu");1<=h.length&&(h[0].onclick=null);f=a;d=h.attr("href");c=j;b=p;!(0<c)&&StackExchange.options.site.isNoticesTabEnabled&&(99<b&&(b=99),0<b&&$("#portalLink .unreadCount").text(""+b).addClass("newNotices"),x());h.removeAttr("href").click(i);x();$(document).click(function(a){e()&&!$.contains($("#portalLink")[0],
a.target)&&i()})}}}();
StackExchange.notify=function(){function f(b,c){var e=$("#dismissed-messages");e.val(e.val()+"~"+b+(c?" "+c:"")+"~")}function d(b,c){var e=$("#dismissed-messages").val();return!e?!1:RegExp("~"+b+(c?" "+c:"")+"~").test(e)}function c(b,c,e){var a=parseInt($("body").css("margin-top").match(/\d+/)),b=c*a/b;e?$("body:not(.no-message-slide)").animate({marginTop:b+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",b+"px")}var b=0,g=function(e,d){var h=$("#notify-"+e+(d?"-"+d:""));-1==
e?$.cookie("m","0",{expires:90,path:"/"}):-1<e&&$.post("/messages/mark-as-read",{messagetypeid:e,id:d?d:null});f(e,d);b--;h.fadeOut("fast",function(){c(b+1,b,!0);h.remove()})},e=function(c){b++;if(d(c.messageTypeId,c.id))return!1;var e="";c.messageTypeId&&(e=' id="notify-'+c.messageTypeId+(c.id?"-"+c.id:"")+'"');e="<div"+e+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+c.text+"</span>";if(c.showProfile)var h=encodeURIComponent("/users/"+
c.userId+"?tab=badges&sort=recent"),e=e+(' See your <a href="/messages/mark-as-read?messagetypeid='+c.messageTypeId+"&returnurl="+h+'">profile</a>.');e=$(e+"</div>");e.find(".notify-close").click(function(){c.close&&c.close();g(c.messageTypeId,c.id)});$("#notify-container").append(e);return!0},i=function(){$("#notify-container div").fadeIn("slow")},l=function(b,c){var d=$('<div class="link-more"><a>view '+b+" more notification"+(1!=b?"s":"")+"</a></div>");$("#notify-container").append(d);d.click(function(){d.detach();
for(var a=0;a<c.length;a++)e(c[a]);i()})};return{showMessages:function(d,g){for(var h=0,a=g?2:d.length,k=0;k<a&&k<d.length;k++)e(d[k])&&h++;c(b,h,!1);i();g&&h<d.length&&(a=d.slice(a),l(d.length-h,a))},show:function(b,c){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");e({text:b,messageTypeId:c});i()},close:g,getMessageText:function(b){return $("#notify-"+b+" .notify-text").text()}}}();
function moveScroller(){var f=$("#scroller").width(),d=function(){var c=$(window).scrollTop(),b=$("#scroller-anchor").offset().top,d=$("#scroller");c>b?d.height()>$(window).height()?d.css({position:"fixed",top:"",bottom:"0px",width:f}):d.css({position:"fixed",top:"0px",bottom:"",width:f}):c<=b&&d.css({position:"relative",top:"",bottom:""})};$(window).scroll(d).resize(d);d()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var f=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),f=!0);var d;if(d=!$(this).hasClass("prettyprint")){d=$(this);var c=$("#prettify-lang").text();""!=c?(d.addClass(c),d=!0):d=!1}d&&($(this).addClass("prettyprint"),f=!0)});f&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(f){function d(b,e){var d=$("<div id='"+f.id+"'/>").html(e),a=$("<div />").css({overflow:"hidden",position:"absolute",width:1,height:1,top:0,left:0}).append(d).appendTo("body"),k=f.showing(b,d),j={left:k.left};k.hasOwnProperty("bottom")?(j.bottom=k.bottom,j.top="auto"):j.top=k.top;var i;f.shown&&(i=function(){f.shown(b,d)});a.css(j).animate({height:d.outerHeight()+8,width:d.outerWidth()+8},300,i);c=function(){a.stop().remove();f.removed&&f.removed(b,d);c=g=
null};g=StackExchange.helpers.DelayedReaction(c,5);j=a;k.additional&&(j=j.add(k.additional));j.hover(g.cancel,g.trigger)}var c,b,g,e,i={},l=StackExchange.helpers.DelayedReaction(function(b,g){if(!e&&b){var h;f.cache&&"c_"+b in i?h=$.Deferred().resolve(i["c_"+b]):(h=$.ajax({type:"GET",url:b,dataType:"html"}),f.cache&&h.done(function(a){i["c_"+b]=a}));h.done(function(a){c&&c();""!=a&&d(g,a)})}},500);$(document).delegate(f.selector,{mouseenter:function(){if(g&&this===b)g.cancel();else return b=this,
l.trigger(f.getUrl(this),this),e=!1},mouseleave:function(){e=!0;l.cancel();g&&g.trigger()}})};
StackExchange.tagmenu=function(){function f(b){var b=$(b),c=b.attr("href");if(!c||"/"!=c.charAt(0))return null;c=b.text();if(-1<c.indexOf("*"))return null;b.attr("title","");return"/tags/"+encodeURIComponent(c)+"/subscriber-info"}function d(b,c){var d=$(b),f=d.offset(),m=d.outerHeight(),d={left:f.left},n=f.top+m,m=f.left+c.outerWidth();c.height()+n>$(window).height()+$(window).scrollTop()?d.bottom=$(window).height()-f.top-8:d.top=n;f=Math.max(1024,$(window).width());m>f&&(d.left-=m-f);return d}var c,
b;return{init:function(g){c=g;b||(b=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag)",id:"tag-menu",getUrl:f,showing:d,shown:function(b,d){c&&c(d,$(b).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function f(c,d){var f=$(c).find("img:first"),l=f.offset(),m=f.height(),n=f.width(),h=Math.max(n,m),a=64*m/h,h=64*n/h,k=d.find("img:first").css({width:h,height:a}),j=k.offset();k.css("visibility","hidden");b=f.clone().css({position:"absolute",zIndex:300,left:l.left,top:l.top,width:n,height:m}).appendTo("body");var o=function(){k[0].complete?(k.css("visibility","visible"),b.fadeOutAndRemove()):setTimeout(o,500)};b.animate({width:h,height:a,top:l.top+j.top},200,o);return{top:l.top,
left:l.left-j.left,additional:b}}function d(){b.remove()}var c,b;return{init:function(){c||(c=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(b){b=/\/users\/([^/]+).*$/.exec($(b).closest(".user-hover").find(".user-details a").attr("href"));return!b?null:"/users/user-info/"+b[1]},cache:!0,id:"user-menu",showing:f,removed:d}))}}}();
StackExchange.chatAd=function(){function f(){var a=$(".question .post-taglist .post-tag");return!a.length?null:a.map(function(a,b){return $(b).text()}).get().join(" ")}function d(a){return 10>a?"0"+a:a}function c(a){var b=new Date;b.setTime(1E3*a);return[b.getUTCFullYear(),"-",d(b.getUTCMonth()+1),"-",d(b.getUTCDate())," ",d(b.getUTCHours()),":",d(b.getUTCMinutes()),":",d(b.getUTCSeconds()),"Z"].join("")}function b(a){var b=Math.floor((new Date).getTime()/1E3)-a,c=b%60,e=Math.floor(b/60),j=Math.floor(b/
3600);if(1>b)return"just now";if(60>b)return 1==c?"1 sec ago":c+" secs ago";if(3600>b)return 1==e?"1 min ago":e+" mins ago";if(86400>b)return 1==j?"1 hour ago":j+" hours ago";b=Math.floor(b/86400);if(1==b)return"yesterday";if(2>=b)return b+" days ago";a=new Date(1E3*a);return o[a.getMonth()]+" "+a.getDate()+" at "+a.getHours()+":"+d(a.getMinutes())}function g(a){var b=$("<div />");b.text(a);return b.html().replace('"',"&quot;")}function e(){$.get(h,null,function(a,b,c){m(a,b,c)})}function i(a){for(var c=
$('<div class="ad502-users" />'),d=0;d<a.length&&7>d;d++){var e=a[d],j=e.name;e.lastPost&&(j+=": "+b(e.lastPost));var f="http://www.gravatar.com/avatar/"+e.emailhash+"?s=23&d=identicon&r=PG",e=$('<a href="'+(n+"/users/"+e.id)+'" />');$("<img />").attr("title",j).attr("src",f).appendTo(e);c.append(e)}return c}function l(a){var b=a.user;return(a=a.userid)?'<a href="'+n+"/users/"+a+'">'+g(b)+"</a>":g(b)}function m(d){var f=$("#ad502-rooms");if(!d.error){f.html("");for(var h=d.rooms,t=0;t<h.length&&2>
t;t++){var s=h[t],u=n+"/rooms/"+s.id,o=$('<div class="ad502-room"></div>');o.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+g(s.name)+'"><a href="'+u+'">'+g(s.name)+"</a></span></h3>"));s.messages&&0<s.messages.length&&o.append($('<span title="'+c(s.lastPost)+'" class="ad502-last-message">'+b(s.lastPost)+" - "+l(s.messages[0])+"</span><br>"));s.singleImage?o.append($('<div class="ad502-users"><img src="'+n+"/rooms/users/"+s.id+'.jpeg" /></div>')):o.append(i(s.users));
f.append(o)}1<d.activeUsers?$("#h-chat-link").text(d.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",d.activeUsers+" users active in "+d.activeRooms+" rooms the last 60 minutes")}a<=j&&window.setTimeout(e,1E3*a);a+=k}var n,h,a=180,k=30,j=480,o="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");/^\/questions\/\d+/i.test(window.location.pathname)&&(j=0);return{init:function(a){n=a.chatUrl;h=a.reloadUrl;if(a.tagBased){var b=f();if(!b)return;
h+=(/\?/.test(h)?"&":"?")+"tags="+encodeURIComponent(b)}null===a.preloadData?e():m(a.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var f={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(d){for(var c in f)f.hasOwnProperty(c)&&(d=d.replace(RegExp("["+c+"]"),f[c]));return d}}();
function sanitizeAndSplitTags(f,d){for(var f=$.trim(f).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),c=f.split(/[\s|,;]+/),b=[],g=0;g<c.length;g++){var e=StackExchange.helpers.noDiacritics(c[g].toLowerCase()).replace(/_/g,"-"),e=e.replace(RegExp("[^a-z0-9.#+"+(d?"*":"")+"-]","g"),""),e=e.replace(/^[#+-]+/,""),e=e.replace(/[.-]+$/,"");0<e.length&&-1==$.inArray(e,b)&&b.push(e)}return b}
StackExchange.question=function(){var f=function(a,b){var c=null!=a;a||(a=$('div.question div.post-menu a:contains("link")'));var d=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))d.find(".close-share-tip").click();else{a.addClass("share-link");var e=a.attr("id").substring(10),f=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",h=$('<div class="share-tip" style="display:none">share a link to this '+f+'<input type="text" value="http://'+
document.location.host+a.attr("href")+'" style="display:block; width:292px;"><a class="close-share-tip" style="float:right">close</a></div>');b&&h.find(".close-share-tip").before('<a id="link-post-'+e+'" style="float:left">cite</a>');h.appendTo(d).fadeIn(c?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){h.fadeOutAndRemove()}).end().find("input[type=text]").select()}},d=function(a){var b=$("#post-form h2:first"),c=b.wrap("<div />").parent(),
d=c.wrap("<div />").parent(),e=$("<div />").prependTo(d),f=d.height(),h=$("<div />"),a=$(a),k=parseInt(b.css("margin-bottom")),g=$("#content"),v=$("#wmd-input").outerWidth(),i=g.offset().left>b.offset().left-5&&"visible"!=g.css("overflow-x");h.css({height:0,overflowY:"hidden"}).appendTo(c).append(a);d.css({height:f,position:"relative"});c.css({position:"absolute",bottom:-k,width:v});e.addClass("answer-help-background").css({position:"absolute",bottom:-k,height:0,width:v});i&&(e.css("left",0),c.animate({paddingLeft:5},
1E3));h.animate({height:a.height()+k+10},1E3);e.animate({height:a.height()+k+10+f},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(c).fadeIn(1E3).find("a").one("click",function(a){var d=$(this).parent();setTimeout(function(){d.remove()},1);h.animate({height:0},1E3,function(){h.add(e).remove();b.unwrap().unwrap()});e.animate({height:0},1E3);i&&c.animate({paddingLeft:0},1E3);a.preventDefault()})},c=function(){$.get("/posts/answer-help").then(d)},b,g,e,i=
function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?l(a[2],a[3]):m($(".answer[data-answerid="+a[1]+"]")))},l=function(a,b){var c="#comment-"+a,d=$(c);d.length?m(d):StackExchange.comments.loadAll($("#comments-link-"+b)).done(function(){m($(c))})},m=function(a){var c=e;a.css({backgroundColor:b}).animate({backgroundColor:c},2E3,"linear",function(){$(this).css("background-color","")});a.is(".comment")&&a[0].scrollIntoView(!0)},n=function(a){a=a||{};
$('.post-menu a:contains("link")').live("click",function(b){if(!b.ctrlKey&&!b.metaKey)return f($(this),a.showCitation),!1})},h=null,a=function(a,b,c){if(!h&&!a.is(":focus"))return!0;var d=b.find(".title-float-option"),e=h?d.index(h):-1,e=e+c;if(-1>e||e>=d.length)return!0;b.find(".title-float-selected").removeClass("title-float-selected");if(-1==e)return h=null,a.focus(),!1;h=d.eq(e);h.addClass("title-float-selected");return!1},k=function(b,c){if(b.is(":focus")){var d=b.offset(),e=$(c);e.find(".answer-summary").addClass("title-float-option");
e.find(".answer-link a").attr("target","_blank");var f=$(".title-search-float");0==f.length?(b.focus(function(){0<f.children().length&&setTimeout(function(){f.show()},0)}),f=$('<div class="title-search-float"></div>'),b.parent().append(f),$(document).keydown(function(c){if(27==c.keyCode||9==c.keyCode)f.hide(),$(".title-float-selected").removeClass("title-float-selected"),h=null;if(38==c.keyCode)return a(b,f,-1);if(40==c.keyCode)return a(b,f,1);if(13==c.keyCode&&(c=f.find(".title-float-selected:visible"),
0!=c.length))return c=c.find("a").attr("href"),window.open(c,"_blank"),!1}),$(document).click(function(a){var c=$(a.target)[0]==b[0];0==$(a.target).parents(".title-search-float").length&&!c&&f.hide()}),$(window).resize(function(){if(f.is(":visible")){var a=b.offset(),c=a.top+b.outerHeight();f.width(b.outerWidth()-2+"px");f.offset({top:c,left:a.left})}})):f.show();f.empty();var k=d.top+b.outerHeight();f.append(e);f.css({position:"absolute"});f.width(b.outerWidth()-2+"px");f.offset({top:k,left:d.left})}};
return{initTitleSearch:function(a,b,c){var d=0,e;a.attr("autocomplete","off");var f=function(){var f=a.val();if(!(f==e||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var h=f.split(" "),g=0,i=0;i<h.length;i++)0<$.trim(h[i]).length&&g++;h=(new Date).getTime();i=(h-d)/1E3;3>g||5>i&&!a.hasClass("edit-field-overlayed")||(d=h,e=f,c&&(document.title=f+" - "+c),StackExchange.options.site.newTitleSearchBoxEnabled?(b.addClass("title-loading"),$.ajax({url:"/search/titles?like="+
escape(f),success:function(b){/\<label\>/i.exec(b)||(d=0);k(a,b)},complete:function(){b.removeClass("title-loading")}})):(StackExchange.helpers.addSpinner(b),b.load("/search/titles?like="+escape(f),null,function(a){/\<label\>/i.exec(a)||(d=0);setTimeout(function(){b.find(".answer-link a").attr("target","_blank")},1)})))}},h=function(){d=0;f()};a.keyup(f).blur(h);setInterval(f,100);return h},showShareTip:f,getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");
return a},highlightComment:l,initShareLinks:n,canViewVoteCounts:function(){return g},init:function(a){StackExchange.question.fullInit?StackExchange.question.fullInit(a):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:a.autoShowCommentHelp});a.showShareTip&&f();$("input.anon-vote").live("click",function(){var a=$(this),b=a.postId(),c=a.parent();c.closest(".question,.answer").unbind("mouseenter.helpful").unbind("mouseleave.helpful");c.text("sending feedback ...");
setTimeout(function(){c.text("Thank you for your feedback.")},500);$.ajax({type:"POST",url:"/vote/anon/"+b,data:{votetypeid:"Yes"==a.val()?2:3},complete:function(){}})});var d=$(".was-this-helpful"),h=d.css("color"),k=$(".post-text").css("color");d.each(function(){var a=$(this),b=a.text();a.closest(".answer, .question").bind("mouseenter.helpful",function(){a.html("Was this post useful to you? &nbsp;&nbsp;<input style='display:none;' class='anon-vote' type='button' value='Yes'/> &nbsp;<input style='display:none;' class='anon-vote' type='button' value='No'/>").animate({color:k},
"fast","linear").find("input").fadeIn("fast")}).bind("mouseleave.helpful",function(){a.text(b).animate({color:h},"fast","linear")})});n(a);if(a.showAnswerHelp)$("#wmd-input").one("focus",c);a.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});e=a.backgroundColor;b=a.highlightColor;g=a.canViewVoteCounts;i(a)}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function f(d){return function(c){var b='Please <a href="/users/login?returnurl='+escape(document.location)+'">login or register</a> to '+d+" this post.";StackExchange.helpers.showErrorPopup($(this).parent(),b);var b="",f=$(this).prop("className"),e=$(this).closest(".answer").length?"answer":"question";/vote-up/.test(f)?b="?vote=up&type="+e:/vote-down/.test(f)?b="?vote=down&type="+e:/star/.test(f)&&(b="?vote=favorite");StackExchange.helpers.fireAndForget("/analytics/user/try-vote"+
b);c.preventDefault()}}$(".vote-up-off, .vote-down-off").click(f("vote for"));$("div.post-menu a[id^='flag-post-']").unbind("click").click(f("flag"));$(".star-off:not(.disabled)").live("click",f("favorite"))};
StackExchange.comments=function(){function f(b,c){this.postId=b;this.jDiv=c;this.jCommentsLink=$("#comments-link-"+b)}function d(c){var d=(c.constructor===$?c:$(c)).closest(".question, .answer, div[id^='post-']").find(".comments"),c=d.attr("id").replace(/^comments-/,"");if(b[c])return b[c];d=new f(c,d);return b[c]=d}function c(){if(0!=$(".question[data-questionid]").length){var b=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var c=$(this),d=c.closest(".answer"),
d=d&&d.length?d.data("answerid"):0,f=c.closest(".comment").attr("id").substr(8);c.wrap('<a class="comment-link" onclick="StackExchange.question.highlightComment({cid}, {aid})" href="{hash}"></a>'.format({hash:"#comment"+f+"_"+(d?d:b),cid:f,aid:d}))})}}var b={},g=function(){};f.prototype={checkDiscussion:g,ensureInput:g,commentsShown:function(){this.jCommentsLink.hide();this.jCommentsLink.data("comments-count",0)},addShow:function(b){var c=this;this.loadAllComments().done(function(){c.jCommentsLink.hide();
c.checkDiscussion()});var d=this.ensureInput();d&&!b&&d.focus()},ajax:function(b,c,d,f){d&&!f&&StackExchange.helpers.addSpinner(d,{"margin-left":"10px"});var g=this;return $.ajax(b).fail(function(b){$(".error-notification").fadeOut("fast",function(){$(this).remove()});b=b.responseText;if(!b||100<=b.length)b="An error occured"+(c?" "+c:"");StackExchange.helpers.showErrorPopup(d||g.jDiv,b);d&&!f&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(b){this.jDiv.find(" > table > tbody").html(b);
this.jCommentsLink.text("add comment");"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);c();this.commentsShown()},loadAllComments:function(b){this.jDiv.removeClass("dno");if(!b&&!/more comment/.test($("#comments-link-"+this.postId).text()))return $.Deferred().resolve().promise();var c=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments",dataType:"html"},"while fetching comments").done(function(b){c.showComments(b)}).promise()}};return{init:function(b){b=b&&
b.post||document;$("a[id^='comments-link-']",b).click(function(){var b=/more comment/.test($(this).text());d(this).addShow(b)});b==document&&c()},loadAll:function(b){return d(b).loadAllComments(!0)},extendPostUi:function(b){for(var c in b)b.hasOwnProperty(c)&&(f.prototype[c]=b[c])},uiForPost:d}}();
StackExchange.share=function(){function f(c,b,d){window.open(c,b,d)||(window.location.href=c)}function d(c,b){var d=c.indexOf("?"),e=c.indexOf("#");return-1==d?-1==e?c+"?"+b:c.substring(0,e)+"?"+b+c.substring(e):-1==e?c+"&"+b:c.substring(0,e)+"&"+b+c.substring(e)}return{gplus:function(c,b){b=d(b,"sgp=1");c.click(function(){f("https://plus.google.com/share?url="+b,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(c,b,g){b=d(b,"stw=1");c.click(function(){f("http://twitter.com/share?url="+
b+"&ref=twitbtn&text="+g,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(c,b,g){b=d(b,"sfb=1");c.click(function(){f("http://www.facebook.com/sharer.php?u="+b+"&ref=fbshare&t="+g,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(f,d){window.tagRenderer||(window.tagRendererRaw=function(c,b){var b=b||"",g="";b||(f&&-1<$.inArray(c,f)?g=" required-tag":d&&-1<$.inArray(c,d)&&(g=" moderator-tag"));return"<a class='post-tag"+g+"' href='"+b+"/questions/tagged/"+encodeURIComponent(c)+"' title=\"show questions tagged '"+c+"'\" rel='tag'>"+c+"</a>"},window.tagRenderer=function(c,b){return $(tagRendererRaw(c,b))})}
function showFadingHelpText(f){f.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var f={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},d=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),c=function(b){return $(b).parent().hasClass("tag-editor")?f["tag-editor"]:f[$(b).attr("id")]};d.focus(function(){var b=c(this);d.each(function(){var d=c(this);d!=b&&$(d).hide()});var f=$(b);f.is(":visible")||showFadingHelpText(f)})}
$.fn.extend({postId:function(){var f=this.first();if(!f.hasClass("answer")||!f.hasClass("question"))f=f.closest(".answer, .question");return parseInt(f.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function f(c){c=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(c);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function d(){var c=
StackExchange.options.site.name,b=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+c+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+c+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',
$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));b.find("form").submit(function(){var c=$(this),d=$.trim(b.find("#newsletter-email-input").val());if(0==d.length)return!1;StackExchange.helpers.addSpinner(c);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:d},success:function(b){"confirmed"==b.status&&!b.error?(c.find("#newsletter-email-input").attr("disabled",!0),c.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==b.status&&!b.error?(c.find("#newsletter-email-input").attr("disabled",!0),c.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),c.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):
c.showErrorPopup(b.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){c.showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(c)}});return!1});f(b)}return{init:function(){$("#newsletter-signup").click(function(){var c=$(this);if(StackExchange.options.user.isAnonymous)return d(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");
$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(b){b.url?window.location.href=b.url:"confirmed"==b.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==b.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):c.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},
error:function(){c.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var c=$(window).height(),c=Math.min(600,c-100),c=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',c,'px;"><iframe src="',$(this).attr("href"),'" width="660" height="',c,'" frameborder="0"></iframe></div>'].join("");
f(c);return!1})},loader:function(c,b){var c=b||c,d=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:c},success:function(b){$("#newsletter-ad").remove();d.empty().append($(b))},complete:function(){d.attr("class","").attr("style","")}});b||(window.sessionStorage.tNewsletter=c+"-continued")}}}();
(function(f,d,c,b){f.fn.caret=function(g,e){var i,l,m=this[0],n=f.browser.msie;"object"===typeof g&&"number"===typeof g.start&&"number"===typeof g.end?(i=g.start,l=g.end):"number"===typeof g&&"number"===typeof e?(i=g,l=e):"string"===typeof g?-1<(i=m.value.indexOf(g))?l=i+g[d]:i=null:"[object RegExp]"===Object.prototype.toString.call(g)&&(g=g.exec(m.value),null!=g&&(i=g.index,l=i+g[0][d]));if("undefined"!=typeof i)return n?(n=this[0].createTextRange(),n.collapse(!0),n.moveStart("character",i),n.moveEnd("character",
l-i),n.select()):(this[0].selectionStart=i,this[0].selectionEnd=l),this[0].focus(),this;if(n)if(l=document.selection,"textarea"!=this[0].tagName.toLowerCase()){n=this.val();i=l[c]()[b]();i.moveEnd("character",n[d]);var h=""==i.text?n[d]:n.lastIndexOf(i.text);i=l[c]()[b]();i.moveStart("character",-n[d]);var a=i.text[d]}else i=l[c](),l=i[b](),l.moveToElementText(this[0]),l.setEndPoint("EndToEnd",i),h=l.text[d]-i.text[d],a=h+i.text[d];else h=m.selectionStart,a=m.selectionEnd;i=m.value.substring(h,a);
return{start:h,end:a,text:i,replace:function(b){return m.value.substring(0,h)+b+m.value.substring(a,m.value[d])}}}})(jQuery,"length","createRange","duplicate");StackExchange.loggedIn={};
var profileLink=function(){var f,d,c,b=!1,g,e,i,l=function(){return $(".profile-link")},m=function(a){a||(a=l());return a.hasClass("profile-link-on")},n=function(a,b){b.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},h=function(a){if(!a.data("loading")){a.data("loading",!0);var b=a.find(".profile-stats");b.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(b).fadeIn("fast")},error:function(){a.data("loading",
!1)},complete:StackExchange.helpers.removeSpinner})}},a=function(){var a=new Date;a.setTime(a.getTime()+1E3*i);var b=a.getUTCHours(),a=a.getUTCMinutes();10>b&&(b="0"+b);10>a&&(a="0"+a);$(".profile-popup .popup-clock").text("UTC time "+b+":"+a)},k=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){j.cancel()}}),j=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){k.cancel()}}),o=function(a){a.hover(k.trigger,j.trigger)};
return{init:function(a,c,e,h){var k=l(),j=$(".profile-triangle");f=k.attr("href");d=a;b=c;g=e;i=h||0;j.click(profileLink.click);c||o(k.add(j));$(document).click(function(a){m(k)&&a.target!=k[0]&&a.target!=j[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=l();j.cancel();k.cancel();m(a)?profileLink.hide():profileLink.show()},show:function(k,j){if(!k||"number"==typeof k)k=l();j||(j=$(".profile-popup"));if(!j.length){var i=k,t=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"><div class="profile-gravatar"><a href="'+
f+'">'+d+'</a><ul class="profile-links"><li><a href="'+g+'">activity</a></li>'+(i.hasClass("child-meta")?"":'<li><a href="/privileges">privileges</a></li>')+'<li><a href="/users/logout">log out</a></li></ul></div><div class="profile-stats"></div><div class="profile-footer"><span class="popup-clock"></span> <a>close</a></div></div></div>');t.insertBefore(i).find(".profile-footer").click(profileLink.click);b||o(t);j=t}m(k)||(j.fadeIn("fast"),h(j),n(!0,k),e=new Date);c||(c=setInterval(a,2E4),a())},hide:function(a,
b){if(e&&!(500>(new Date).getTime()-e.getTime())){if(!a||"number"==typeof a)a=l();b||(b=$(".profile-popup"));m(a)&&(b.fadeOut("fast"),n(!1,a));c&&(clearInterval(c),c=null)}}}}();
StackExchange.tagPreferences=function(){function f(b,c,d){var a="";"undefined"!=typeof forUserId&&(a=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:b,value:c,forUserId:a},d)}var d=function(b,c){return b.map(function(b,a){return $(a).text()}).filter(function(b,a){if(!c)return!0;var d;/\*/.test(a)&&(d=RegExp(a.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(b=0;b<c.length;b++){var e=c[b];if(a===e||d&&d.test(e))return!1}return!0}).map(function(b,a){var c;c=a.replace(/#/g,
"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(c)?"div.tags:regex(class, t-"+c.replace(/\*/g,".*")+")":"div.t-"+c}).get().join(",")},c=function(c,d,e,a,k,j){for(var i=$(c).val(),l=sanitizeAndSplitTags(i,!0),r=!1,q=0;q<l.length;q++)0!=$.trim(l[q]).length&&($(d).children().each(function(){$(this).text()==l[q]&&($(this).fadeTo(500,0.1).fadeTo(500,1),r=!0)}),r||(i=$.URLEncode(l[q]),$(d).append('<a id="'+l[q]+'" href="/questions/tagged/'+i+'" class="'+a+'" title="show questions tagged \''+
l[q]+"'\">"+l[q]+"</a> "),b(e)),r=!1);$(c).val("");k&&$(c).focus();j||f(e,$(d).text());g()},b=function(b){$(20==b?"#interestingTags > .post-tag:last":25==b?"#ignoredTags > .post-tag:last":"#interestingTags > .post-tag, #ignoredTags > .post-tag").append('<span class="delete-tag" title="remove this tag"></span>').click(function(b){b=$(b.target);if(b.is("[class^=delete-tag]")){var b=b.closest(".post-tag"),c=b.closest("div"),a=c.is("#ignoredTags")?25:20;b.remove();f(a,c.text());g();return!1}})},g=function(b,
c){var e=$("#ignoredTags > a"),a=$("#interestingTags > a");if(!b||!(0==e.length&&0==a.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");e=d(e,c);a=d(a,c);if(0<e.length){var f=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(e).closest("div.question-summary").addClass(f)}0<a.length&&$(a).closest("div.question-summary").addClass("tagged-interesting")}},e=function(b,d){var e=$("#tag-menu"),a;"favorite"==d&&(a=$("#ignoredTags a").filter(function(){return $(this).text()==
b}),a.add(a.next()).remove(),$("#interestingTag").val(b),c("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==d&&(a=$("#interestingTags a").filter(function(){return $(this).text()==b}),a.add(a.next()).remove(),$("#ignoredTag").val(b),c("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==d&&(a=$("#ignoredTags a").filter(function(){return $(this).text()==b}),a.add(a.next()).remove(),a=$("#interestingTags a").filter(function(){return $(this).text()==b}),a.add(a.next()).remove(),
g());StackExchange.helpers.addSpinner(e);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(b)+"/favorite",data:{action:d,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(a){l(e.html($(""+a)),b)},error:function(){},complete:StackExchange.helpers.removeSpinner})},i=function(b,c){var d=$("#tag-menu");StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(b)+"/subscription",data:{unsubscribe:c,fkey:StackExchange.options.user.fkey},dataType:"html",
success:function(a){l(d.html($(""+a)),b)},error:function(){},complete:StackExchange.helpers.removeSpinner})},l=function(b,c){b.find(".tm-se-subscription").click(function(){i(c,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?e(c,"ignore"):$(this).hasClass("tm-favorite-clear")?e(c,"favorite"):$(this).hasClass("tm-favorite-ignore")&&e(c,"clear")})};return{applyPrefs:g,isIgnored:function(b){var c=
$("#ignoredTags > a");if($("#hideIgnored").is(":checked")&&(c=d(c,!0),0<c.length))return 0<$(b).find(c).length},init:function(){StackExchange.tagmenu.init(l);0!=$("#interestingTags").length&&(b(),$("#ignoredAdd").click(function(){c("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)}),$("#interestingAdd").click(function(){c("#interestingTag","#interestingTags",20,"post-tag user-tag",!0)}),$("#hideIgnored").click(function(){f(30,$(this).is(":checked"));g()}),StackExchange.using("tagAutocomplete",
function(){bindTagFilterAutoComplete("#ignoredTag");bindTagFilterAutoComplete("#interestingTag")}))}}}();
StackExchange.question.fullInit=function(f){window.votesCast=f.votesCast;StackExchange.vote.init(f.questionId);StackExchange.question.bindSuggestedEditPopupLinks();f.canViewVoteCounts&&StackExchange.vote.bindFetchVoteCounts();StackExchange.vote_bounty.init(f);if(/^#autocomment/.test(window.location.hash)){var d=$(".comments-link:first"),c="#comment-"+window.location.hash.substring(12),b=function(){var b=$(c),d=$("<span><b>Trivial answer converted to comment</b></span>");b.find(".comment-date").append($("<br>")).append(d);
b.css({backgroundColor:f.highlightColor});b.animate({backgroundColor:f.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(c)[0].scrollIntoView(!0)};f.totalCommentCount&&f.shownCommentCount&&f.totalCommentCount!=f.shownCommentCount?StackExchange.comments.loadAll(d).done(b):b()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){$("div.post-menu a[id^='edit-pending-']").each(function(){var f=$(this);StackExchange.using("suggestedEdits",function(){f.unbind("click").click(function(){StackExchange.suggestedEdits.loadPopup($(this));return!1})})})};
StackExchange.vote=function(){var f=StackExchange.helpers,d={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},c=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){e($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){i($(this))})},b=function(a){return(a?a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click")},
g=function(a){$.each(a,function(){var a=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case d.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case d.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case d.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},e=
function(c){var e=c.parent().find(".vote-up-off"),f=c.parent().find(".vote-down-off"),j=e.hasClass("vote-up-on"),g=f.hasClass("vote-down-on");h(c,j?-1:g?2:1);n(e,f);j||e.addClass("vote-up-on");e=j?d.undoMod:d.upMod;b(c);f=m(c);a(c,f,e,k)},i=function(c){var e=c.parent().find(".vote-up-off"),f=c.parent().find(".vote-down-off"),j=f.hasClass("vote-down-on"),g=e.hasClass("vote-up-on");h(c,j?1:g?-2:-1);n(e,f);j||f.addClass("vote-down-on");e=j?d.undoMod:d.downMod;b(c);f=m(c);a(c,f,e,k)},l=function(){return $("div.vote a[id^='vote-accepted-']")},
m=function(a){return a.closest("div.vote").find("input").val()},n=function(a,b){a.removeClass("vote-up-on");b.removeClass("vote-down-on")},h=function(a,b){var c=a.siblings("span.vote-count-post"),d;if(0<c.find(".vote-count-separator").length){d=parseInt(c.children(":first").text(),10);var e=Math.abs(parseInt(c.children(":last").text(),10));d-=e;w(c)}else d=parseInt(c.text(),10);c.text(d+b)},a=function(a,b,c,d,e,f){var k={fkey:StackExchange.options.user.fkey};if(e)for(var h in e)k[h]=e[h];var g=function(){$.ajax({type:"POST",
url:"/posts/"+b+"/vote/"+c,data:k,dataType:"json",success:function(c){c.Warning?confirm(c.Message)?(k.ignoreWarnings="true",g()):f&&f():(d(a,b,c),f&&f())},error:function(){j(a,"An error has occurred - please retry your request.");f&&f()}})};g()},k=function(a,b,e){if(e.Success){if(e.Message){var k=e.Message;f.showErrorPopup(a.parent(),k,!0)}e.ShowShareTip&&(e=$(a).closest(".question,.answer").find('div.post-menu a:contains("link")'),StackExchange.question.showShareTip(e))}else if(window.console&&window.console.firebug&&
(!e.Message||5>e.Message.length))j(a,"FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");else if(j(a,e.Message),n(a,a),a.parent().find("span.vote-count-post").text(e.NewScore),e.LastVoteTypeId){var e=e.LastVoteTypeId,h;e==d.upMod?(k=".vote-up-off",h="vote-up-on"):e==d.downMod&&(k=".vote-down-off",h="vote-down-on");k&&a.closest("div.vote").find(k).addClass(h)}c(a.parent())},
j=function(a,b,c){f.showErrorPopup(a.parent(),b,!1,c)},o=function(){$(".star-off:not(.disabled)").live("click",function(a){p($(this));a.preventDefault()})},p=function(b){if(!b.data("loading")){b.data("loading",!0);var c=m(b)||b.siblings("input[type=hidden]").val(),e=b.parent().find("div.favoritecount b"),f=parseInt("0"+e.text().replace(/^\s+|\s+$/g,""),10),k=function(){b.hasClass("star-on")?(b.removeClass("star-on"),e.removeClass("favoritecount-selected").text(0>=f--?"":f)):(b.addClass("star-on"),
e.addClass("favoritecount-selected").text(++f))};k();a(b,c,d.favorite,function(a,c,d){b.data("loading",!1);d.Success||(k(),b.parent().showErrorPopup(d.Message))})}},r=function(b,c){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(e){e.preventDefault();var e=$(this),f=e.attr("id").substring(12),k=-1<e.text().indexOf("undelete");if(confirm("Vote to "+(k?"un":"")+"delete this post?"))a(e,f,k?d.undeletion:d.deletion,
b||q,c)})},q=function(a,b,c){var d=-1<a.text().indexOf("undelete");c&&c.Success?(a.text(c.Message),0>c.NewScore?(a=0<$(".question:has(a[id='delete-post-"+b+"'])").length?".question, div.answer":"#answer-"+b,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):
j(a,"This post still needs "+c.NewScore+" vote(s) from other users to "+(d?"un":"")+"delete")):(d=c&&c.Message?c.Message:"A problem occurred during "+(d?"un":"")+"deletion",f.showErrorPopup(a.parent(),d))},t=function(){var b=$(this),c=b.attr("id").substring(14),e=l();b.is(":working")||(b.parent().addSpinner(),e.working(!0),a(b,c,d.acceptedByOwner,function(a,c,f){f.Success?(e.removeClass("vote-accepted-on"),parseInt(f.Message,10)==d.acceptedByOwner&&b.addClass("vote-accepted-on")):j(b,f.Message);b.parent().removeSpinner();
e.working(!1).trigger("update")}))},s=function(){var a=$(this),b=(a.hasClass("vote-accepted-on")?"un":"")+"accept";a.attr("title",a.data("title-"+b)).text(a.data("verb-"+b))},u=function(a){var b=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".format({postId:b}),dataType:"json",success:function(b){$(".error-notification").fadeOutAndRemove();a.html('<div style="color:green">'+b.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+
b.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",b.up+" up / "+b.down+" down")},error:function(b){a.removeSpinner().parent().showErrorPopup(b.responseText&&100>b.responseText.length?b.responseText:"An error occurred during vote count fetch")}})},w=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){u($(this))}).data("bound",!0)};return{init:function(a){StackExchange.options.user.isRegistered?
(null==votesCast?$.ajax({type:"GET",url:"/posts/"+a+"/votes",dataType:"json",success:g}):g(votesCast),c(),$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1}),$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();
a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1}),StackExchange.vote_closingAndFlagging.init(),o()):StackExchange.question.bindAnonymousVoteDisclaimers();l().not(":data(bound)").on({click:t,update:s}).data("bound",!0).trigger("update");r()},up:e,down:i,favorite_init:o,delete_init:r,bindFetchVoteCounts:w,highlightExistingVotes:g,
submit:a,voteTypeIds:d,getPostId:m}}();
StackExchange.vote_closingAndFlagging=function(){var f=StackExchange.vote.voteTypeIds,d,c=function(a,c,d,e){$("#close-question-popup").remove();var f=a.parent();d||a.addSpinnerAfter({padding:"0 3px"});$.ajax({type:"GET",url:"/posts/popup/close/"+c+(d?"?isForFlagging=1":""),dataType:"html",success:function(c){c=$(c);e&&(e.fadeOut("fast"),n=c);c.appendTo(f);b(c,a,e);c.center().fadeIn("fast")},error:function(){f.showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},
b=function(a,b,c){a.find(".popup-close").click(function(){a.fadeOutAndRemove();c&&c.remove()});var d=a.find(".popup-actions-cancel");c?d.text("back").click(function(){a.fadeOut("fast");c.fadeIn("fast")}):d.click(function(){a.fadeOutAndRemove()});var e=a.find(".popup-submit");a.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var b=$(this),c=b.closest("li");!c.hasClass("action-selected")&&!i(b)&&(e.enable(),a.find(".popup-active-pane li.action-selected").removeClass("action-selected"),
c.addClass("action-selected"))});var f=$("#duplicate-question"),k=$("#duplicate-question-id");f.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){m(e,f,questionId,k)}});$("#close-question-form").submit(function(){g(a,b,$(this),k,e);return!1})},g=function(a,b,c,d,f){if(!f.attr("disabled")){$("#remaining-votes").addSpinner({position:"absolute",margin:"3px 0 0 5px"});f.disable();var k=0<a.find("input[name=isForFlagging]").length,j=d.val();$.ajax({type:"POST",url:c.attr("action"),
dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:k,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked, input#migrate-anywhere:checked').val(),"duplicate-question-id":j},success:function(a){e(b,questionId,a,k,!!j)},error:function(){b.parent().showErrorPopup(-1<"A problem occurred when trying to "+b.text().indexOf("open")?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();
a.fadeOutAndRemove()}})}},e=function(a,b,c,e,f){!e&&a.is("[id^='flag-post-'], [id^='mobile-flag-post-']")&&(a=a.parent().find("a[id^='close-question'], a[id^='mobile-close-post-']"));b=a&&-1<a.text().indexOf("open")?"reopen":"close";if(c.Success){if(!d||!d.closeCallback||!d.closeCallback(a,c))if(c.Message){var k=a.parent();e?k.showErrorPopup(c.Message):(a.text(a.text().replace(/\w?\(\d\)/,"")+" "+c.Message),k.showErrorPopup("This question still needs "+c.NewScore+" vote(s) from other users to "+b));
f&&(a.closest(".mod-post-header").length||StackExchange.comments.loadAll(a))}else c.RedirectTo?location.href=c.RedirectTo:location.reload(!0)}else e=null,c.Refresh&&(e=function(){location.reload(!0)}),a.parent().showErrorPopup(c.Message||"A problem occurred when trying to "+b,!1,e)},i=function(a){var b=a.attr("id").substr(6),c=$("#pane"+b);if(0==c.length)return null;$("#pane-main").removeClass("popup-active-pane").hide();c.addClass("popup-active-pane").show();$.each(c.find(".auto-load"),function(){$(this).removeClass("auto-load").addSpinner();
0==$(this).attr("id").indexOf("suggested-duplicates-")&&$(this).load("/posts/popup/close-suggestions/"+$(this).attr("id").substr(21),function(){var a=$("#duplicate-question");$(this).find(".existing-linked-questions input[type=radio]").click(function(){a.hideHelpOverlay().val($(this).parent().attr("title")).keydown()})})});a.closest("div.popup").find(".popup-actions-cancel").html("back").unbind("click").click(l);window["pane"+b]();return c},l=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();
$("#pane-main").addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");$(".popup").find(".popup-submit").disable().end().find(".popup-actions-cancel").html("cancel").unbind("click").click(function(){$(".popup").fadeOutAndRemove()})},m=function(a,b,c,d){var e=b.parent().find(".selected-master-preview");a.disable();e.html("");0!=$.trim(b.val()).length&&(StackExchange.helpers.addSpinner(e),$.ajax({type:"GET",
url:"/posts/validate-duplicate-question/"+c,data:{val:b.val()},dataType:"json",success:function(b){b.success?(d.val(b.id),e.html('<div class="post-text"><h3><a href="'+b.url+'" target="_blank">'+b.title+"</a></h3><p>"+b.body+"</p></div><p>"+b.tags+"</p>"),a.enable()):b.title?e.html(b.title):e.html("")},error:function(a){StackExchange.helpers.removeSpinner();StackExchange.helpers.showErrorPopup(b.parent(),a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during duplicate validation")}}))},
n,h,a=function(a){n=null;j(a);a.find("form").submit(function(){p(a);return!1});$("#flag-load-close").unbind("click").click(function(){if(h)h(a,$(this));else{var b=$(this);b.closest("li").siblings("li").trigger("hide-action");if(n)a.fadeOut("fast"),n.fadeIn("fast");else{b.siblings(".action-name").addSpinner({margin:"0 5px"});var d=a.attr("id").substr(11),e=$("#flag-post-"+d),f="true"==$("#flag-isClosePopupForFlagging").val();c(e,d,f,a)}a.find(".popup-submit").disable();b.removeAttr("checked")}})},
k=function(a){a=a.find("input:radio").attr("id").substr(5);a=a==f.offensive||a==f.spam;$(".flag-remaining-spam").toggle(a);$(".flag-remaining-inform").toggle(!a)},j=function(a){var b=a.find(".popup-submit"),c=a.find('textarea[name="flag-reason"]');c.focus(function(){c.hideHelpOverlay();var a=c.closest("li").find("input:radio");a.is(":checked")||a.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(a){c.closest("li").find("input[type=radio][value=other]").is(":checked")&&b.enable(a)}});
a=c.closest(".action-subform");a.find("input.flag-prefilled").click(function(){b.enable()});a.find('input[value="other"]').click(function(){c.focus()});a.find("label, input:radio").css("cursor","pointer")},o=function(a){if(a.is(".mod-attention-subform")){var b=a.find('textarea[name="flag-reason"]');b.helpOverlay();a.find("input[value=other]:checked").length?b.focus():a.find("input:radio:checked").length||a.closest(".popup").find(".popup-submit").disable()}},p=function(a){a.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();
var b=a.attr("id").substr(11),c=$("#flag-post-"+b),d=a.find('input[name="flag-post"]:checked').val();d==f.informModerator?r(a,b,c):StackExchange.vote.submit(c,b,d,q,null,function(){a.fadeOutAndRemove()})},r=function(a,b,c){var d=a.find(".mod-attention-subform"),e=d.find("input:radio:checked"),d="other"==e.val()?d.find('textarea[name="flag-reason"]').val():e.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+b,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:d},success:function(a){c.parent().showErrorPopup(a.Message)},
error:function(a){c.parent().showErrorPopup(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during submission")},complete:function(){a.fadeOutAndRemove()}})},q=function(a,b,c){c.Refresh?location.reload(!0):a.parent().showErrorPopup(c.Message)};return{on_close_click:function(a){h=a},flag_actionSelected:k,flag_subformShow:o,close_initPopup:b,flag_loaded:a,init:function(b){d||(d=b);$("div.post-menu a[id^='close-question-'], table.flagged-posts input[id^='close-question-']").unbind("click").die("click").live("click",
function(a){a.preventDefault();var a=$(this),b=-1<a.text().indexOf("open"),d=a.attr("id").substring(15);b?confirm("Nominate this question for reopening?")&&StackExchange.vote.submit(a,d,f.reopen,e):(b="true"==$("#close-isClosePopupForFlagging").val(),c(a,d,b))});$("div.post-menu a[id^='flag-post-'], div.flag-options .flag-post").unbind("click").die("click").live("click",function(b){b.preventDefault();var b=$(this),c=b.attr("id").substring(10);b.loadPopup({url:"/posts/popup/flag/"+c+(b.hasClass("show-invalid")?
"?showInvalid=true":""),loaded:a,hideDescriptions:!0,actionSelected:k,subformShow:o})})}}}();
(function(){function f(a,b){this.commentId=a;this.jComment=b;this.postUi=i(b)}function d(a){var a=a.constructor===$?a:$(a),a=a.hasClass("comment")?a:a.closest(".comment"),b=a.attr("id").replace(/^comment-/,"");return new f(b,a)}function c(a,b,c){/Android/.test(navigator.userAgent)&&$(b,a).bind("touchstart",function(a){a=$(a.target);if(!a.is(c))return!0;var b=a.data("events");if(b&&b.click&&b.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function b(a,b,
e){$(".comments",a).delegate(b,"click",function(){d(this)[e]()});c(a,".comments",b)}var g,e=StackExchange.comments,i=e.uiForPost;e.extendPostUi({ensureInput:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),b=this;return a.children().length?(a.add(a.prev()).show(),a.find("textarea")):m(a,"Add Comment",!1,function(){b.submitNewComment()})},commentsShown:function(){try{var a=this.jDiv.find("form[id^='add-comment-'] textarea:focus");a.length&&StackExchange.comments.tabCompleter.init(a);this.jCommentsLink.data("comments-count",
0)}catch(b){}},submitNewComment:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),b=a.find("textarea"),c=this,d=a.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:b.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",d).done(function(d){c.showComments(d);b.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(a);a.add(a.prev()).hide();c.jCommentsLink.show()}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},
checkDiscussion:function(){var a=this.jDiv.find("tr.is-comment-discussion"),b=this;if(a.length){a.remove();var c=this.jDiv.find(".comment-form");c.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(a){$(this).unbind("click");a.preventDefault();b.ajax({url:"/posts/"+b.postId+"/move-discussion-to-chat",
data:{fkey:StackExchange.options.user.fkey},type:"POST"},"when trying to move the discussion to chat",c).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorPopup(c,a.message)})}).end().prependTo(c),a.remove())}}});f.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var a=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),
b=this;this.submitVote(0).done(function(c){c.Success?(a.closest("tr").siblings("tr").show(),b.renderScore(c.NewScore),a[0].title="this is a great comment"):a.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(b){409===b.status&&a.addClass("comment-up-undo");a.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var a=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),b=this;this.submitVote(2).done(function(c){c.Success?
(a.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),a.addClass("comment-up-undo"),b.renderScore(c.NewScore),a[0].title="you've voted for this as a great comment (click again to undo)"):a.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){a.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var a=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(b){b.Success&&a.jComment.remove()})},flag:function(){var a=this;this.jComment.find(".comment-flag").loadPopup({url:"/posts/comments/popup/flag/"+
this.commentId,loaded:function(b){var c=b.find("#comment-popup-other-text").charCounter({min:6,max:200,setIsValid:function(){f()}}),d=b.find("#comment-popup-other").click(function(){f();c.focus()}),e=b.find(".text-counter"),f=function(){var a=0==b.find('input[name="comment-reason"]:checked').length;d.is(":checked")?(a=c.show().val().length,e.show(),a=6>a||200<a):(c.hide(),e.hide());b.find(".popup-submit").attr("disabled",a)};b.find("input").click(f);f();b.find("form").submit(function(){var e=(d.is(":checked")?
c:b.find('input[name="comment-reason"]:checked')).val();b.fadeOutAndRemove();a.submitVote(4,e).done(function(b){b.Success&&(-1===b.NewScore?a.jComment.remove():a.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove())});return!1})}})},edit:function(){var a=this.jComment,b=a.find('form[id^="edit-comment-"]'),c=this;a.find(" > td > *").not(b).hide();a.find("td:last").addClass("comment-form");a=m(b,"Save Edits",!0,function(){c.submitEdit()});a.val(b.find("div").text());b.show();a.focus()},cancelEdit:function(){var a=
this.jComment,b=a.find('form[id^="edit-comment-"]');b.children("table").remove();b.hide();b.unbind("submit");a.find("td:last").removeClass("comment-form");a.find(" > td > *").not(b).show()},submitEdit:function(){var a=this.jComment.find('form[id^="edit-comment-"]'),b=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:a.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"during comment submission",a).done(function(a){b.postUi.showComments(a)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},
submitVote:function(a,b){var c=this.jComment.find("td:first");return this.postUi.ajax({type:"POST",url:"/posts/comments/{commentId}/vote/{voteTypeId}".format({commentId:this.commentId,voteTypeId:a}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,text:b},success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorPopup(c,a.Message)}},"during voting",c,!0)},renderScore:function(a){var b="";a&&0<a&&(b+='<span title="number of \'great comment\' votes received" class="'+(5>a?
"":15>=a?"warm":30>=a?"hot":"supernova")+'">'+a+"</span>");this.jComment.find(".comment-score").html(b)}};var l=function(a){a.find("textarea").keyup(function(b){13==b.which&&!b.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&a.submit()}).keypress(function(a){if(13==a.which&&!a.shiftKey)return!1})},m=function(a,b,c,e){b=a.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+b+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+
b+'"/>'+(c?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';a.append(b);c&&a.find(".edit-comment-cancel").click(function(){d(a).cancelEdit()});var f=!1,c=a.find("textarea");c.charCounter({min:15,max:600,setIsValid:function(a){f=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});a.find(".comment-help-link").click(n);
if(g)c.one("focus",n);a.submit(function(){f?(StackExchange.helpers.disableSubmitButton(a),e(a)):a.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)});return!1});StackExchange.options.desc||l(a);return c},n=function(a){var b=$(this).closest("tbody"),c=b.find(".comment-help-link"),d=$(".comment-help",b),e;if("click"==a.type)e=0==d.length||!d.is(":visible"),e||(n.manualOnly=!0);else{if(n.manualOnly)return;e=!0}var f=function(){c.text(e?"hide help":"help")};
0<d.length?e?d.slideDown(f):d.slideUp(f):e&&(a=$("<tr />").appendTo(b),a=$("<td colspan='2' />").appendTo(a),n.helpText?(a.html(n.helpText),$(".comment-help",a).slideDown(f)):(StackExchange.helpers.addSpinner(c),a.load("/posts/comment-help",function(a){n.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(f)})))},h=e.init;e.init=function(a){h(a);g=a&&a.autoShowCommentHelp;a=a&&a.post||document;b(a,".comment-up","voteUp");b(a,".comment-delete","delete");b(a,".comment-flag",
"flag");b(a,".comment-edit","edit");b(a,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",a).each(function(){i(this).addShow(!0)})}})();
StackExchange.comments.tabCompleter=function(){function f(b){var a=$("#tabcomplete");a.empty();!(5<b.length)&&b.length&&$.each(b,function(b,c){var d=$("<li/>").text(c).appendTo(a);c.toLowerCase()==m.toLowerCase()&&d.addClass("chosen")})}function d(){var b=l.caret().start,a=l.val(),c=!1;if(/@[^\s!?();:+"].*@/.test(a)){if(!/`/.test(a))return null;c=!0}var d=a.substring(b).search(/[\s!?();:+"\[\]\\]/);-1==d&&(d=a.length-b);var e=a.substring(0,b+d).match(/@[^\s!?();:+"\[\]\\]+$/);if(!e)return null;var e=
e[0].substr(1),d=b+d,f=d-e.length;return c&&/@[^\s!?();:+"]/.test(a.substr(0,f-1))?null:{start:f,pos:b,end:d,name:e}}function c(b){var a=d();if(a.name===b)l.is(":focus")||l.focus();else{var c=l.val();l.val(c.substring(0,a.start)+b+c.substring(a.end));b=a.start+b.length;l.caret(b,b)}}function b(b){var a;if(9==b.which){a=$("#tabcomplete li");if(!a.length)return;var d=a.filter(".chosen").removeClass("chosen"),d=b.shiftKey?d.prev():d.next();d.length||(d=b.shiftKey?a.last():a.first());a=d.addClass("chosen").text()}else if(27==
b.which){a=$("#tabcomplete li");if(!a.length)return;a=m;m=null}else return;b.preventDefault();c(a)}function g(b){if(b.which)switch(b.which){case 9:case 16:case 17:case 18:case 220:return}var a=d();if(a){if(m!=a.name){b=[];m=a.name;for(var a=RegExp("^"+StackExchange.helpers.noDiacritics(a.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"),c=i.length,e=0;e<c;e++){var g=i[e].name;StackExchange.helpers.noDiacritics(g.replace(/ /g,"").toLowerCase()).match(a)&&b.push(g.replace(/ /g,""))}f(b)}}else m=
null,f([])}function e(b){return!b?null:parseInt(b.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var i,l,m=null;$("#tabcomplete > li").live("mousedown",function(){var b=$(this);b.parent().find("li.chosen").removeClass("chosen");c(b.addClass("chosen").text());return!1});var n=e($("#hlinks a.profile-link").attr("href"));return{init:function(c){if(!StackExchange.options.isMobile){var a=c.closest("div.comments"),d=a.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),
d=e(d.attr("href")),f=[];a.find("a.comment-user").each(function(a,b){var c=b.firstChild;if(3!==c.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var c=c.nodeValue,d=e($(b).attr("href"));d!==n&&f.push({id:d,name:c})}});i=[];for(var a={},o=f.length-1;0<=o;o--){var p=f[o];a[p.id]||(i.push(p),a[p.id]=!0)}$("#tabcomplete").remove();l&&l.unbind($.browser.opera?"keypress":"keydown",b).unbind("keyup click",g);0===i.length||1===i.length&&i[0].id===d?l=null:(l=c,m=null,$("<ul id='tabcomplete' />").insertBefore(c),
c.bind("keydown",b).bind("keyup click",g))}}}}();
StackExchange.inlineEditing={init:function(){function f(d,c,b,f){c.fadeIn(b,f);d.hide()}$(".post-menu .edit-post").live("click",function(d){if(!d.ctrlKey&&!d.altKey&&!d.metaKey&&!d.shiftKey){var d=$(this),c=d.closest(".question, .answer");c.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();d.addSpinner();var b=c.hasClass("answer"),g=c.find(".postcell,.answercell"),e=g.find("> *"),i=$('<div class="inline-editor"/>').hide().appendTo(g);
i.load(d.attr("href")+"-inline",function(d,m){var n;i.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();c.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);if("error"==m)StackExchange.helpers.showErrorPopup(g,"The post could not be loaded"),i.remove();else{f(e,i,300);var h=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;
StackExchange.navPrevention.stop()}$("#show-editor-button").show();f(i,a,300,function(){i.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);return!1},a=function(){q.unbind("keyup",k);s.trigger(n)},k=function(){s.trigger(q[0].value);return!0};i.find(".cancel-edit").click(function(){a();h(e)});var j=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},
1E3,{sliding:!0}),o=i.find(".hide-preview");o.click(function(){var a=i.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),o.text("show preview")):(a.slideDown(),o.text("hide preview"));j.trigger(b);return!1});var p=i.find('input[type="submit"]');p.attr("id").replace("submit-button","");var r=i.find("form"),q=i.find("#title"),t=$("#question-header a");n=q.val();var s=StackExchange.helpers.DelayedReaction(function(a){t.text(a);"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,
t[0]])},{sliding:!0});q.keyup(k);i.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(b){if(!0===b.ctrlKey&&13==b.keyCode)return r.submit(),!1;if(27==b.keyCode)return a(),h(e),!1});r.submit(function(){var a=$(this).serialize();a.fkey=StackExchange.options.user.fkey;StackExchange.navPrevention&&StackExchange.navPrevention.stop();p.parent().addSpinner();StackExchange.helpers.disableSubmitButton(r);$.ajax({type:"POST",dataType:"json",data:a,url:r[0].action,success:function(a){if(a.success){var c=
$(a.html).hide();g.replaceWith(c);b||$("#question-header a").text(a.title);$("html").trigger("inline-edit-complete",[c,a.title]);styleCode();h(c)}else a.redirect?window.location=a.redirect:StackExchange.helpers.showErrorPopup(p.parent(),a.message)},error:function(){StackExchange.helpers.showErrorPopup(p.parent(),"An error occurred saving the edit")},complete:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(r)}});return!1})}});return!1}})}};
StackExchange.vote_bounty=function(){var f,d=function(b,c,d){c=$(".bounty-vote");if(d.Success){$(".bounty-notification").remove();f=!1;var g=b.closest("td.votecell").parent().find("span.reputation-score:last");d.Message&&(d=$(d.Message),g.text(d.text()).attr("title",d.attr("title")));d=b.closest("div.vote").find(".bounty-award-container");1<d.length?(d=d.filter(":first").find(".bounty-award"),g=parseInt(d.text(),10),b=parseInt(b.text(),10),d.text("+"+(g+b)),c.remove()):(b.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
c.not(b).remove())}else StackExchange.helpers.showErrorPopup(b.parent(),d.Message),c.removeClass("disabled")},c=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var b=$(this),c=StackExchange.vote.getPostId(b);if(f?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(b,
c,StackExchange.vote.voteTypeIds.bountyClose,d)})},b=function(b){b.addSpinnerAfter({padding:"0 3px"});var c=$(b).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+c,dataType:"html",success:function(c){var d=$(c);d.appendTo(b.parent());d.find(".popup-close").click(function(){d.fadeOutAndRemove()});d.center().fadeIn("fast")},error:function(){b.parent().showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},g=
function(){var c=$(".bounty-link");c.click(function(){b(c)})};return{init:function(b){f=!!b.hasOpenBounty;b.canOpenBounty&&g();b.hasOpenBounty&&c()}}}();
